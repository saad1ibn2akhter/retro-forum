;/*FB_PKG_DELIM*/

__d("PasswordFeedbackDialog",["Event","tidyEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){c("tidyEvent")(c("Event").listen(b,"click",function(){a.hide()})),c("Event").listen(d,"click",function(){a.show()})}g.init=a}),98);
__d("PasswordStrength",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({WEAK_PASSWORD:1,MEDIUM_PASSWORD:2,STRONG_PASSWORD:3});c=a;f["default"]=c}),66);
__d("computeWorkplacePasswordFeedback",["$InternalEnum","PasswordStrength"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum").Mirrored(["LOWERCASE","UPPERCASE","NUMBER","SYMBOL"]);function i(a){var b=new Set(),c=new RegExp("[0-9]");c.test(a)||b.add(h.NUMBER);c=new RegExp("[^A-Za-z0-9]");c.test(a)||b.add(h.SYMBOL);c=new RegExp("[A-Z]");c.test(a)||b.add(h.UPPERCASE);c=new RegExp("[a-z]");c.test(a)||b.add(h.LOWERCASE);return b}function a(a){var b=a.length,d=i(a);a=/^(.)\1+$/.test(a);(b>=20||d.size===0)&&!a?a=c("PasswordStrength").STRONG_PASSWORD:b>=8&&d.size===1?a=c("PasswordStrength").MEDIUM_PASSWORD:a=c("PasswordStrength").WEAK_PASSWORD;return{strength:a,missingTypes:d}}g.CharacterClass=h;g.computeWorkplacePasswordFeedback=a}),98);
__d("PasswordFeedback",["fbt","$","ARIA","DOM","DOMScroll","Dialog","Event","PasswordStrength","bind","computeWorkplacePasswordFeedback","nullthrows"],(function(a,b,c,d,e,f,g,h){var i=h._("Check the help tag for password feedback");function a(a,b,e,f,g,l,m,n){n===void 0&&(n=!1);var o=function(a,b){a=c("$")(a);b=c("$")(b);a=a.value;n?k(a,b,m,l):j(a,b,m,l)},p=function(a,b,d){a=c("$")(a);b=c("$")(b);d=c("$")(d);var e,f="short_pass";a.value.length===0?(f="accessible_elem",e=i):a.value.length<b.value.length?e=h._("Confirmation password is too short"):a.value!=b.value?e=h._("Passwords do not match"):(f="strong_pass",e=h._("Passwords match"));c("DOM").setContent(d,c("DOM").create("span",{className:f},e))};function q(b){!a||c("$").fromIDOrElement(a).value==c("$").fromIDOrElement(e).value?c("$")(c("nullthrows")(g)).disabled=!0:(d("DOMScroll").scrollTo(c("$")("fb_menubar")),b.kill())}e&&c("Event").listen(c("$").fromIDOrElement(e),"keyup",c("bind")(null,o,e,f));a&&(e&&c("Event").listen(c("$").fromIDOrElement(e),"keyup",c("bind")(null,p,a,e,b)),c("Event").listen(c("$").fromIDOrElement(a),"keyup",c("bind")(null,p,a,e,b)));[b,f].forEach(function(a){a&&c("$").fromIDOrElement(a).appendChild(c("DOM").create("span",{className:"accessible_elem"},i))});a&&b&&d("ARIA").describedBy(c("$").fromIDOrElement(a),c("$").fromIDOrElement(b));e&&f&&d("ARIA").describedBy(c("$").fromIDOrElement(e),c("$").fromIDOrElement(f));g&&c("Event").listen(c("$")(g).form,"submit",q)}function j(a,b,d,e){var f=a.length,g=0,h=new RegExp("[0-9]");h.test(a)&&g++;h=new RegExp("[^A-Za-z0-9]");h.test(a)&&g++;h=new RegExp("[A-Z]");h.test(a)&&g++;f>=8&&g++;g<=1?h=c("PasswordStrength").WEAK_PASSWORD:g===2?h=c("PasswordStrength").MEDIUM_PASSWORD:h=c("PasswordStrength").STRONG_PASSWORD;l(h,e);f&&f<6?o(b):d||!f?n(b):m(h,b)}function k(a,b,c,e){var f=a.length;a=d("computeWorkplacePasswordFeedback").computeWorkplacePasswordFeedback(a).strength;l(a,e);f&&f<8?o(b):c||!f?n(b):m(a,b)}function l(a,b){b&&(c("$")(b).value=a.toString())}function m(a,b){var d,e;if(a===c("PasswordStrength").WEAK_PASSWORD)d="weak_pass",e=h._("Weak");else if(a===c("PasswordStrength").MEDIUM_PASSWORD)d="medium_pass",e=h._("Medium");else if(a===c("PasswordStrength").STRONG_PASSWORD)d="strong_pass",e=h._("Strong");else{n(b);return}c("DOM").setContent(b,h._("Password strength").toString()+": ");b.appendChild(c("DOM").create("span",{className:d},e))}function n(a){var b="accessible_elem",d=i;c("DOM").setContent(a,"");a.appendChild(c("DOM").create("span",{className:b},d))}function o(a){var b="short_pass",d=h._("Too short");c("DOM").setContent(a,"");a.appendChild(c("DOM").create("span",{className:b},d))}function b(){var a=h._("As you create your password, remember the following:").toString()+"<ul><li>"+h._("It \u003Cstrong>should not\u003C\/strong> contain your name.").toString()+"</li><li>"+h._("It \u003Cstrong>should not\u003C\/strong> contain a common dictionary word.").toString()+"</li><li>"+h._("It \u003Cstrong>should\u003C\/strong> contain one or more numbers.").toString()+"</li><li>"+h._("It \u003Cstrong>should\u003C\/strong> have both upper and lower case characters.").toString()+"</li><li>"+h._("It \u003Cstrong>should\u003C\/strong> be at least 6 characters long.").toString()+"</li></ul";new(c("Dialog"))().setTitle(h._("Create a strong password")).setBody(a).setButtons([c("Dialog").OK]).show();return!1}function e(a,b,d,e){var f=!0;function g(){var g=c("$")(b),h=c("$")(a);f=!f;c("DOM").setAttributes(g,{type:f?"text":"password"});c("DOM").setContent(h,f?e:d)}c("Event").listen(c("$")(a),"click",g)}g.setupFeedback=a;g.showHelp=b;g.setupShowNewPwd=e}),98);
__d("setupPasswordEncryption",["FBBrowserPasswordEncryption","LoginServicePasswordEncryptDecryptEventTypedLogger","ODS","cr:5662","cr:6114","promiseDone"],(function(a,b,c,d,e,f,g){var h,i={};a={submitEncryptedPassword:function(a,c,e,f){b("cr:5662").listen(a,"submit",function(g){var i=window.crypto?"1":"0",j=window.msCrypto?"1":"0",k=f?"1":"0";(h||(h=d("ODS"))).bumpEntityKey(5289,"pwd_enc","submitEncryptedPassword.flowName."+e+".window-crypto."+i+".window-msCrypto."+j+".pubKey."+k);g.preventDefault();i=a[c].value;if((window.crypto||window.msCrypto)&&f){j=b("FBBrowserPasswordEncryption");var l=Math.floor(Date.now()/1e3).toString();k=b("promiseDone");k(j.encryptPassword(f.keyId,f.publicKey,i,l),function(f){(h||(h=d("ODS"))).bumpEntityKey(5289,"pwd_enc","submitEncryptedPassword.flowName."+e+".encryptedPassword");f=b("cr:6114").create("input",{type:"hidden",name:"encpass",value:f});a.appendChild(f);a[c].disabled=!0;a.submit()},function(c){(h||(h=d("ODS"))).bumpEntityKey(5289,"pwd_enc","submitEncryptedPassword.flowName."+e+".error");var f="#PWD_BROWSER",g=5,i=b("LoginServicePasswordEncryptDecryptEventTypedLogger");new i().setError(c).setErrorMessage(c.message).setGrowthFlow(e).setPasswordTag(f).setPasswordEncryptionVersion(g).setPasswordTimestamp(l).logVital();a.submit()})}else a.submit()})},setupPasswordEncryptionBeforeSubmission:function(a,c,d,e,f,g,h){var j=b("promiseDone"),k=b("FBBrowserPasswordEncryption"),l=Math.floor(Date.now()/1e3).toString(),m=null;g===!0&&(i[e]=i[e]||"",!a.value&&i[e].length?j(k.encryptPassword(d.keyId,d.publicKey,i[e],l),function(a){m=a},function(c){var d="#PWD_BROWSER",g=5,h=b("LoginServicePasswordEncryptDecryptEventTypedLogger");new h().setError(c).setGrowthFlow(e).setErrorMessage(c.message).setPasswordTag(d).setPasswordEncryptionVersion(g).setPasswordTimestamp(l).logVital();f(null,a.value)}):i[e]=a.value);j(k.encryptPassword(d.keyId,d.publicKey,a.value,l),function(d){if(c){m!=null&&(d=m);var e=b("cr:6114").create("input",{type:"hidden",name:"encpass",value:d});c.appendChild(e);h||(a.disabled=!0)}f(d,null)},function(c){var d="#PWD_BROWSER",g=5,h=b("LoginServicePasswordEncryptDecryptEventTypedLogger");new h().setError(c).setGrowthFlow(e).setErrorMessage(c.message).setPasswordTag(d).setPasswordEncryptionVersion(g).setPasswordTimestamp(l).logVital();f(null,a.value)})}};f.exports=a}),34);